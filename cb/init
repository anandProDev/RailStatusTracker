
/entrypoint.sh couchbase-server &

sleep 15

ulimit -n 10240
ulimit -c unlimited

curl -s -u Administrator:password -X POST http://localhost:8091/pools/default -d memoryQuota=512

/opt/couchbase/bin/couchbase-cli cluster-init -c localhost:8091 --cluster-username=admin --cluster-password=oogway --cluster-ramsize=512 --services=data,index,query --cluster-index-ramsize=256 --index-storage-setting=default

/opt/couchbase/bin/couchbase-cli bucket-create -c localhost:8091 --bucket=status-tracker --bucket-type=couchbase --bucket-replica=0 --bucket-ramsize=100 -u admin -p oogway

/opt/couchbase/bin/couchbase-cli user-manage -c localhost:8091 -u admin -p oogway --set --rbac-username status-tracker --rbac-password status-tracker --rbac-name "status-tracker Bucket" --roles bucket_admin[status-tracker],bucket_full_access[status-tracker],views_admin[status-tracker],views_reader[status-tracker] --auth-domain local

